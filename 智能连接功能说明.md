# 智能连接功能说明

## 功能概述
现在当你从节点的输入/输出端口拖拽连接线，如果松手时没有连接到其他节点，系统会自动弹出**智能菜单**，只显示与当前节点兼容的节点类型。

## 使用方法

### 1. 从输出端口拖拽（右侧圆点）
- 拖拽后松手 → 显示**可以接收此输出的节点**
- 例如：从"文字生图"节点拖出 → 显示"文生视频"、"图像编辑"、"视频分析"

### 2. 从输入端口拖拽（左侧圆点）
- 拖拽后松手 → 显示**可以提供输入的节点**
- 例如：从"文生视频"节点的输入拖出 → 显示"创意描述"、"文字生图"

## 智能过滤规则

### 图片输出节点（文字生图、图像编辑）
可连接到：
- ✅ 文生视频
- ✅ 图像编辑
- ✅ 视频分析

### 视频输出节点（文生视频）
可连接到：
- ✅ 视频分析

### 文本输出节点（创意描述）
可连接到：
- ✅ 文字生图
- ✅ 文生视频
- ✅ 灵感音乐

### 音频输出节点（灵感音乐）
- 暂无下游节点

## 自动连接
选择菜单中的节点类型后，系统会：
1. 在鼠标位置创建新节点
2. 自动建立连接关系
3. 保存到历史记录

## 快捷操作
- 鼠标滚轮：缩放画布
- Shift + 滚轮：平移画布
- 双击画布：创建新节点（显示所有类型）
- 拖拽连接线：智能连接（只显示兼容类型）

## 技术实现
- 根据节点的输出类型（图片/视频/文本/音频）智能过滤
- 根据拖拽方向（输入/输出）显示不同的菜单
- 自动建立正确的连接关系
