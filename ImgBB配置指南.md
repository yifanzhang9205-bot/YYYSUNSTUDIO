# ImgBB 图床配置指南

## 为什么需要 ImgBB？

多角度相机和其他图生图功能需要将 base64 图片转换为 URL，才能传递给西瓜皮 API。ImgBB 是一个免费的图床服务，可以帮我们完成这个转换。

## 获取 ImgBB API Key

### 步骤 1: 注册账号
1. 访问 https://imgbb.com/
2. 点击右上角 "Sign up" 注册账号
3. 使用邮箱或 Google/Facebook 账号注册

### 步骤 2: 获取 API Key
1. 登录后，访问 https://api.imgbb.com/
2. 点击 "Get API key" 按钮
3. 复制显示的 API Key（格式类似：`a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）

### 步骤 3: 配置到项目
1. 打开项目根目录的 `.env.local` 文件
2. 找到 `IMGBB_API_KEY=你的_imgbb_api_key_在这里` 这一行
3. 替换为你的实际 API Key：
   ```
   IMGBB_API_KEY=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
   ```
4. 保存文件
5. 重启开发服务器（`npm run dev`）

## 免费额度

ImgBB 免费账号提供：
- ✅ 每月 10GB 流量
- ✅ 单张图片最大 32MB
- ✅ 无限存储空间
- ✅ 永久保存图片
- ✅ 无广告

对于个人使用，免费额度完全够用！

## 使用场景

配置 ImgBB 后，以下功能将正常工作：

1. **多角度相机** - 基于输入图片生成多角度视图
2. **图生图** - 基于参考图片生成新图片
3. **图像编辑** - 编辑现有图片
4. **视频生成（图片输入）** - 基于图片生成视频

## 工作流程

```
用户上传图片（base64）
    ↓
自动上传到 ImgBB
    ↓
获取公开 URL
    ↓
传递给西瓜皮 API
    ↓
生成新图片
```

## 常见问题

### Q1: 我的 API Key 在哪里？
访问 https://api.imgbb.com/ 登录后即可看到。

### Q2: 免费额度够用吗？
对于个人使用完全够用。每张图片通常 < 1MB，10GB 可以上传 1 万张图片。

### Q3: 图片会被删除吗？
不会。ImgBB 免费账号的图片永久保存。

### Q4: 上传速度快吗？
通常 < 1 秒。ImgBB 有全球 CDN，速度很快。

### Q5: 如果不配置会怎样？
图生图功能会提示错误："图生图功能需要配置 ImgBB API Key"。纯文本生图不受影响。

### Q6: 可以用其他图床吗？
可以。如果你想用其他图床（如 Imgur、SM.MS），可以修改 `services/imgbbService.ts` 文件。

## 隐私说明

- ImgBB 是公开图床，上传的图片任何人都可以访问（如果知道 URL）
- 不要上传包含隐私信息的图片
- 如果需要私密图床，建议使用付费服务或自建图床

## 测试配置

配置完成后，可以这样测试：

1. 创建一个"文字生图"节点，生成一张图片
2. 创建一个"多角度相机"节点
3. 连接图片到多角度相机
4. 点击生成
5. 查看控制台日志，应该看到：
   ```
   [ImgBB] 开始上传图片
   [ImgBB] 上传成功
   [ImgBB] 图片 URL: https://i.ibb.co/...
   ```

## 故障排除

### 错误：API Key 无效
- 检查 `.env.local` 中的 API Key 是否正确
- 确认没有多余的空格或引号
- 重启开发服务器

### 错误：上传失败
- 检查网络连接
- 确认图片大小 < 32MB
- 查看控制台详细错误信息

### 错误：配额不足
- 检查 ImgBB 账户的流量使用情况
- 等待下个月配额重置
- 或升级到付费计划

---

**配置完成后，多角度相机和图生图功能将完美工作！** 🎉
