# 菜单优化更新说明

## 更新内容

### 1. 菜单节点精简
从双击/右键菜单的"基础节点"分类中删除了以下节点：
- ❌ 灵感音乐（AUDIO_GENERATOR）
- ❌ 视频分析（VIDEO_ANALYZER）
- ❌ 图像编辑（IMAGE_EDITOR）

保留的基础节点：
- ✅ 创意描述（PROMPT_INPUT）
- ✅ 文字生图（IMAGE_GENERATOR）
- ✅ 文生视频（VIDEO_GENERATOR）

### 2. UI 优化（iOS 风格）

#### 右键菜单优化
- **背景色**：从 `#1c1c1e/80` 改为 `#2c2c2e/95`，更接近 iOS 深色模式
- **圆角**：从 `rounded-2xl` 改为 `rounded-xl`，更精致
- **内边距**：从 `p-1.5` 改为 `p-1`，更紧凑
- **最小宽度**：从 `160px` 改为 `140px`

#### 菜单项优化
- **字体大小**：从 `text-xs (12px)` 改为 `text-[11px]`
- **内边距**：从 `py-2` 改为 `py-1.5`，更紧凑
- **图标大小**：从 `size={12}` 改为 `size={13}`，更清晰
- **分类标题**：
  - 字体从 `text-[10px]` 改为 `text-[9px]`
  - 颜色从 `text-slate-500` 改为 `text-white/30`
  - 图标从 `size={10}` 改为 `size={9}`

#### 左侧 Dock 添加节点面板优化
- **按钮内边距**：从 `p-3` 改为 `p-2.5`
- **图标容器**：从 `w-9 h-9` 改为 `w-8 h-8`
- **图标大小**：从 `size={16}` 改为 `size={15}`
- **字体大小**：从 `text-[13px]` 改为 `text-[12px]`
- **分类标题**：从 `text-[10px]` 改为 `text-[9px]`，颜色从 `text-white/40` 改为 `text-white/30`

#### 颜色统一
- **文字颜色**：统一使用 `text-white/90`（正常）和 `text-white/30`（标题）
- **悬停效果**：
  - 普通项：`hover:bg-white/10`
  - 智能连接：`hover:bg-cyan-500/20 hover:text-cyan-300`
  - 删除项：`hover:bg-red-500/20`

### 3. 一键整理功能优化

#### 原逻辑（已废弃）
- 按节点创建时间排序
- 使用固定列数的网格布局
- 可能打乱节点的原有位置关系

#### 新逻辑（保持顺序）
- **保持原有位置顺序**：按从左到右、从上到下的顺序排序
- **智能分行**：Y 坐标差距大于 50px 认为是不同行
- **对齐排列**：每行内的节点水平对齐，行与行之间垂直对齐
- **紧凑布局**：
  - 节点宽度：420px（固定）
  - 水平间距：60px
  - 垂直间距：40px
  - 组边距：40px

#### 排列算法
1. 按 Y 坐标分组（差距 > 50px 为新行）
2. 每行内按 X 坐标排序
3. 从组的左上角开始，逐行排列
4. 自动计算并更新组的尺寸

## 视觉效果对比

### 菜单尺寸
- **之前**：较大的内边距和字体，菜单显得臃肿
- **之后**：紧凑的布局，更易于快速选择

### 颜色风格
- **之前**：使用 slate 色系，偏灰蓝
- **之后**：统一使用 white 透明度，更接近 iOS 风格

### 整理效果
- **之前**：可能打乱节点顺序，重新排列
- **之后**：保持原有顺序，只是对齐排列

## 文件修改
- `App.tsx`：
  - 修改右键菜单 UI
  - 修改智能连接菜单 UI
  - 优化 `handleArrangeGroup` 函数
- `components/SidebarDock.tsx`：
  - 修改添加节点面板 UI
  - 删除不需要的节点类型

## 用户体验提升
1. **更快的选择速度**：更小的字体和间距，一屏显示更多选项
2. **更清晰的视觉层次**：统一的颜色系统，更易于区分不同类型
3. **更符合直觉的整理**：保持原有顺序，只是对齐，不会打乱工作流
4. **更精致的外观**：iOS 风格的设计，更现代、更专业
